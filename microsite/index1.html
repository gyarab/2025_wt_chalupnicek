<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Kočičí hotel Mňau — láskyplná péče pro vaše kočky</title>
  <meta name="description" content="Kočičí hotel Mňau v srdci města. Bezpečné apartmány, denní reporty a mazlení podle přání. Rezervujte pohodlně online.">
  <meta name="keywords" content="kočičí hotel, cat hotel, hlídání koček, ubytování koček, Praha">
  <link rel="canonical" href="https://kocici-hotel.example/">

  <!-- Open Graph / Twitter (SEO friendly) -->
  <meta property="og:locale" content="cs_CZ">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Kočičí hotel Mňau — láskyplná péče pro vaše kočky">
  <meta property="og:description" content="Bezpečné apartmány, denní reporty a mazlení podle přání.">
  <meta property="og:url" content="https://kocici-hotel.example/">
  <meta property="og:image" content="https://placecats.com/1200/630">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Kočičí hotel Mňau">
  <meta name="twitter:description" content="Bezpečné apartmány, denní reporty a mazlení podle přání.">
  <meta name="twitter:image" content="https://placecats.com/1200/630">

  <!-- PWA essentials -->
  <meta name="theme-color" content="#0d6efd">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- Favicons (data URIs, vše v jednom souboru) -->
  <link rel="icon" type="image/svg+xml"
        href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 -10 220 220"><circle cx="100" cy="100" r="100" fill="%230d6efd"/><path d="M60 95c-8-25 12-45 40-45s48 20 40 45c0 0-3 35-40 35s-40-35-40-35zm-20-30c-10-8-15-21-10-32 9 7 18 8 28 6-6 9-10 18-18 26zm140 0c10-8 15-21 10-32-9 7-18 8-28 6 6 9 10 18 18 26zM70 105a8 8 0 1016 0 8 8 0 00-16 0zm44 0a8 8 0 1016 0 8 8 0 00-16 0z" fill="%23fff"/></svg>'>
  <link rel="apple-touch-icon"
        href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 -10 220 220"><rect width="200" height="200" rx="30" fill="%230d6efd"/><path d="M60 95c-8-25 12-45 40-45s48 20 40 45c0 0-3 35-40 35s-40-35-40-35zm-20-30c-10-8-15-21-10-32 9 7 18 8 28 6-6 9-10 18-18 26zm140 0c10-8 15-21 10-32-9 7-18 8-28 6 6 9 10 18 18 26zM70 105a8 8 0 1016 0 8 8 0 00-16 0zm44 0a8 8 0 1016 0 8 8 0 00-16 0z" fill="%23fff"/></svg>'>

  <!-- Preconnects pro rychlost -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://placecats.com" crossorigin>
  <link rel="dns-prefetch" href="https://api.mapy.cz">
  <link rel="dns-prefetch" href="https://maps.google.com">

  <!-- Bootstrap 5.3 (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* Vlastní drobný styling navíc k Bootstrapu */
    html { scroll-behavior: smooth; }
    .hero {
      background: radial-gradient(ellipse at top left, rgba(13,110,253,.08), transparent 60%);
    }
    .hero-img {
      border-radius: .75rem;
      box-shadow: 0 1rem 2rem rgba(0,0,0,.15);
      object-fit: cover;
      width: 100%;
      height: 100%;
      min-height: 240px;
    }
    .section-padding { padding: 4rem 0; }
    .cookie-banner {
      z-index: 1080; /* nad modaly */
      background: #0d6efd;
      color: #fff;
    }
    .cookie-banner a { color: #fff; text-decoration: underline; }
    .map-wrapper { position: relative; width: 100%; }
    .map-wrapper .ratio { background: #f8f9fa; border-radius: .5rem; overflow: hidden; }
    .map-fallback { display:none; }
    .brand-cat { font-size: 1.2rem; }
  </style>

  <!-- Manifest JSON inline (přidáme do <head> jako blob pro 1-file řešení) -->
  <script id="manifest-json" type="application/json">
  {
    "name": "Kočičí hotel Mňau",
    "short_name": "Mňau hotel",
    "start_url": ".",
    "scope": ".",
    "display": "standalone",
    "background_color": "#ffffff",
    "theme_color": "#0d6efd",
    "icons": [
      { "src": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-10 -10 220 220'%3E%3Ccircle cx='100' cy='100' r='100' fill='%230d6efd'/%3E%3Cpath d='M60 95c-8-25 12-45 40-45s48 20 40 45c0 0-3 35-40 35s-40-35-40-35zm-20-30c-10-8-15-21-10-32 9 7 18 8 28 6-6 9-10 18-18 26zm140 0c10-8 15-21 10-32-9 7-18 8-28 6 6 9 10 18 18 26zM70 105a8 8 0 1016 0 8 8 0 00-16 0zm44 0a8 8 0 1016 0 8 8 0 00-16 0z' fill='%23fff'/%3E%3C/svg%3E", "sizes": "192x192", "type": "image/svg+xml", "purpose": "any" }
    ]
  }
  </script>

  <!-- Consent mode default (nic se nevkládá, jen připravíme dataLayer) -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    /* Defaultně deny – až po udělení souhlasu přepneme na granted a vložíme GTM */
    gtag('consent','default', {
      'ad_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'analytics_storage': 'denied'
    });
  </script>
</head>
<body>

  <!-- Navigace (Bootstrap .navbar, mobile-first) -->
  <nav class="navbar navbar-expand-lg bg-white shadow-sm sticky-top" aria-label="Hlavní navigace">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="#hero" aria-label="Domů">
        <span class="brand-cat" aria-hidden="true">🐱</span>
        <strong>Kočičí hotel Mňau</strong>
      </a>
      <!-- Toggler pro mobil -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
              aria-controls="mainNav" aria-expanded="false" aria-label="Přepnout navigaci">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!-- .navbar-nav zarovnává položky vpravo na větších obrazovkách -->
      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav ms-auto align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="#o-nas">O nás</a></li>
          <li class="nav-item"><a class="nav-link" href="#galerie">Galerie</a></li>
          <li class="nav-item"><a class="nav-link" href="#kontakt">Kontakt</a></li>
          <li class="nav-item ms-lg-2">
            <a class="btn btn-primary" href="#kontakt" data-scroll-to="#kontakt">Rezervovat</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero sekce s vizuálem a CTA -->
  <header id="hero" class="hero section-padding">
    <div class="container">
      <div class="row gy-4 align-items-center">
        <!-- V Bootstrapu se sloupce skládají pod sebe, na md a výš vedle sebe -->
        <div class="col-12 col-md-6">
          <h1 class="display-5 fw-bold mb-3">Láskyplný kočičí hotel v srdci města</h1>
          <p class="lead">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Váš chlupatý parťák si zaslouží bezpečí, hračky a spoustu pohlazení.</p>
          <div class="d-flex gap-2 flex-wrap">
            <a class="btn btn-primary btn-lg" href="#kontakt" data-scroll-to="#kontakt">Rezervovat pobyt</a>
            <a class="btn btn-outline-primary btn-lg" href="#o-nas" data-scroll-to="#o-nas" aria-label="Zjistit více o nás">Zjistit více</a>
          </div>
          <p class="mt-3 small text-muted">Otevřeno denně • Veterinární dohled • Denní foto-report</p>
        </div>
        <div class="col-12 col-md-6">
          <img src="https://placecats.com/900/600" alt="Spokojená kočka v apartmánu" class="hero-img" loading="eager" decoding="async">
        </div>
      </div>
    </div>
  </header>

  <!-- O nás / popis -->
  <section id="o-nas" class="section-padding">
    <div class="container">
      <div class="row justify-content-center text-center mb-4">
        <div class="col-lg-8">
          <h2 class="fw-bold">Proč právě Mňau?</h2>
          <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent commodo cursus magna, vel scelerisque nisl consectetur et.</p>
        </div>
      </div>

      <!-- Tři výhody – ukázka gridu v Bootstrapu -->
      <div class="row g-4">
        <div class="col-12 col-md-4">
          <div class="card h-100 text-center">
            <div class="card-body">
              <div class="display-6 mb-2" aria-hidden="true">🛌</div>
              <h3 class="h5">Komfortní apartmány</h3>
              <p class="text-muted mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="card h-100 text-center">
            <div class="card-body">
              <div class="display-6 mb-2" aria-hidden="true">🧸</div>
              <h3 class="h5">Individuální péče</h3>
              <p class="text-muted mb-0">Cras mattis consectetur purus sit amet fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="card h-100 text-center">
            <div class="card-body">
              <div class="display-6 mb-2" aria-hidden="true">🩺</div>
              <h3 class="h5">Veterinární dohled</h3>
              <p class="text-muted mb-0">Maecenas faucibus mollis interdum. Sed posuere consectetur est at lobortis.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Galerie -->
  <section id="galerie" class="section-padding bg-light">
    <div class="container">
      <div class="row justify-content-center text-center mb-4">
        <div class="col-lg-8">
          <h2 class="fw-bold">Galerie</h2>
          <p class="text-muted">Malá ochutnávka našeho prostředí. Víc fotek uvidíte na místě 🙂</p>
        </div>
      </div>

      <!-- Karty s obrázky – využíváme .row + .col-* + .g-4 pro mezery -->
      <div class="row g-4">
        <!-- 6 obrázků z placecats.com -->
        <div class="col-6 col-md-4">
          <figure class="card h-100">
            <img class="card-img-top" src="https://placecats.com/600/400" alt="Kočka v pelíšku" loading="lazy" decoding="async">
            <figcaption class="card-body small text-muted">Lorem ipsum dolor sit amet.</figcaption>
          </figure>
        </div>
        <div class="col-6 col-md-4">
          <figure class="card h-100">
            <img class="card-img-top" src="https://placecats.com/601/401" alt="Hrající si kočka" loading="lazy" decoding="async">
            <figcaption class="card-body small text-muted">Consectetur adipiscing elit.</figcaption>
          </figure>
        </div>
        <div class="col-6 col-md-4">
          <figure class="card h-100">
            <img class="card-img-top" src="https://placecats.com/602/402" alt="Kočka s hračkou" loading="lazy" decoding="async">
            <figcaption class="card-body small text-muted">Integer posuere erat a ante.</figcaption>
          </figure>
        </div>
        <div class="col-6 col-md-4">
          <figure class="card h-100">
            <img class="card-img-top" src="https://placecats.com/603/403" alt="Kočka u škrabadla" loading="lazy" decoding="async">
            <figcaption class="card-body small text-muted">Sed posuere consectetur.</figcaption>
          </figure>
        </div>
        <div class="col-6 col-md-4">
          <figure class="card h-100">
            <img class="card-img-top" src="https://placecats.com/604/404" alt="Kočka v okně" loading="lazy" decoding="async">
            <figcaption class="card-body small text-muted">Aenean lacinia bibendum.</figcaption>
          </figure>
        </div>
        <div class="col-6 col-md-4">
          <figure class="card h-100">
            <img class="card-img-top" src="https://placecats.com/605/405" alt="Odpočívající kočka" loading="lazy" decoding="async">
            <figcaption class="card-body small text-muted">Cras mattis consectetur purus.</figcaption>
          </figure>
        </div>
      </div>
    </div>
  </section>

  <!-- Kontakt + mapa -->
  <section id="kontakt" class="section-padding">
    <div class="container">
      <div class="row g-4">
        <div class="col-12 col-lg-5">
          <h2 class="fw-bold">Kontakt &amp; rezervace</h2>
          <p class="text-muted">Kočičí hotel Mňau, Kočičí 12, 110 00 Praha 1</p>
          <ul class="list-unstyled mb-4">
            <li><strong>Telefon:</strong> <a href="tel:+420777123456">+420&nbsp;777&nbsp;123&nbsp;456</a></li>
            <li><strong>E‑mail:</strong> <a href="mailto:ahoj@kocici-hotel.example">ahoj@kocici-hotel.example</a></li>
            <li><strong>Otevírací doba:</strong> Po–Ne 9:00–18:00</li>
          </ul>

          <!-- Jednoduchý „rezervační“ formulář (ukázka Bootstrap formulářů) -->
          <form class="needs-validation" novalidate>
            <div class="mb-3">
              <label for="name" class="form-label">Jméno a příjmení</label>
              <input type="text" class="form-control" id="name" placeholder="Např. Jana Nováková" required>
              <div class="invalid-feedback">Zadejte prosím jméno.</div>
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">E‑mail</label>
              <input type="email" class="form-control" id="email" placeholder="např. jana@example.com" required>
              <div class="invalid-feedback">Zadejte platný e‑mail.</div>
            </div>
            <div class="mb-3">
              <label for="msg" class="form-label">Zpráva</label>
              <textarea class="form-control" id="msg" rows="3" placeholder="Termín, počet koček, speciální přání…"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Odeslat poptávku</button>
            <p class="form-text mt-2">Odesláním souhlasíte se <a href="#" data-bs-toggle="modal" data-bs-target="#modal-privacy">zpracováním osobních údajů</a>.</p>
          </form>
        </div>

        <div class="col-12 col-lg-7">
          <h3 class="h5">Kde nás najdete</h3>
          <div class="map-wrapper">
            <!-- Mapy.cz – embed přes API (přednostně) -->
            <div class="ratio ratio-16x9 rounded" id="mapycz-holder">
              <div id="mapycz" style="width:100%;height:100%;"></div>
            </div>
            <!-- Fallback Google Maps (zobrazí se automaticky, pokud Mapy.cz selžou nebo timeout) -->
            <div class="ratio ratio-16x9 rounded map-fallback mt-3" id="gmap-holder">
              <iframe title="Google mapa – Kočičí hotel Mňau"
                      src="https://maps.google.com/maps?q=Koči%C4%8D%C3%AD%2012%2C%20Praha&t=&z=14&ie=UTF8&iwloc=&output=embed"
                      style="border:0" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            <p class="small text-muted mt-2">Pokud se mapa nenačte, <a href="https://maps.google.com/?q=Koči%C4%8D%C3%AD%2012%2C%20Praha" target="_blank" rel="noopener">otevřít v Google Maps</a>.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Paticka -->
  <footer class="border-top py-4">
    <div class="container d-flex flex-column flex-lg-row justify-content-between align-items-center gap-3">
      <div class="text-muted small">© <span id="year"></span> Kočičí hotel Mňau</div>
      <ul class="list-inline m-0 small">
        <li class="list-inline-item"><a href="#" data-bs-toggle="modal" data-bs-target="#modal-privacy">Zásady ochrany osobních údajů</a></li>
        <li class="list-inline-item">•</li>
        <li class="list-inline-item"><a href="#" data-bs-toggle="modal" data-bs-target="#modal-gdpr">GDPR</a></li>
        <li class="list-inline-item">•</li>
        <li class="list-inline-item"><a href="#" data-bs-toggle="modal" data-bs-target="#modal-cookies">Cookies</a></li>
        <li class="list-inline-item">•</li>
        <li class="list-inline-item"><a href="#" id="open-cookie-settings">Nastavení cookies</a></li>
      </ul>
    </div>
  </footer>

  <!-- Cookie lišta (reaguje, načte GTM až po souhlasu) -->
  <div id="cookie-banner" class="cookie-banner py-3 px-3 fixed-bottom d-none" role="dialog" aria-live="polite" aria-label="Nastavení cookies">
    <div class="container d-flex flex-column flex-lg-row align-items-lg-center gap-3">
      <div class="flex-grow-1 small">
        Používáme nezbytné cookies pro chod webu a volitelné analytické cookies pro vylepšování (Google Analytics přes GTM).
        Více v <a href="#" data-bs-toggle="modal" data-bs-target="#modal-cookies" class="text-white">pravidlech cookies</a>.
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-outline-light btn-sm" id="cookies-reject">Odmítnout</button>
        <button class="btn btn-light btn-sm" id="cookies-settings">Nastavení</button>
        <button class="btn btn-dark btn-sm" id="cookies-accept">Povolit vše</button>
      </div>
    </div>
  </div>

  <!-- Placeholder pro GTM noscript iframe (vloží se po souhlasu) -->
  <div id="gtm-noscript-placeholder" class="d-none"></div>

  <!-- MODAL: Privacy -->
  <div class="modal fade" id="modal-privacy" tabindex="-1" aria-labelledby="modalPrivacyLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="modalPrivacyLabel" class="modal-title">Zásady ochrany osobních údajů</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Zavřít"></button>
        </div>
        <div class="modal-body">
          <p><strong>Správce:</strong> Kočičí hotel Mňau, IČO 12345678. Lorem ipsum dolor sit amet, consectetur adipiscing elit…</p>
          <p>Účely zpracování, právní tituly, doby uchování, příjemci, práva subjektu údajů… (lorem ipsum text).</p>
          <p>Kontakt pověřence: <a href="mailto:dpo@kocici-hotel.example">dpo@kocici-hotel.example</a></p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Zavřít</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: GDPR -->
  <div class="modal fade" id="modal-gdpr" tabindex="-1" aria-labelledby="modalGdprLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="modalGdprLabel" class="modal-title">Informace dle GDPR</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Zavřít"></button>
        </div>
        <div class="modal-body">
          <p>Transparentní informace o zpracování osobních údajů dle Nařízení (EU) 2016/679. Lorem ipsum dolor sit amet…</p>
          <ul>
            <li>Právní základy: plnění smlouvy, oprávněný zájem, souhlas…</li>
            <li>Vaše práva: přístup, oprava, výmaz, omezení, námitka, přenositelnost…</li>
            <li>Dozorový úřad: ÚOOÚ – <a href="https://uoou.gov.cz" target="_blank" rel="noopener">uoou.gov.cz</a></li>
          </ul>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Zavřít</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: Cookies (včetně nastavení kategorií) -->
  <div class="modal fade" id="modal-cookies" tabindex="-1" aria-labelledby="modalCookiesLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="modalCookiesLabel" class="modal-title">Cookies</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Zavřít"></button>
        </div>
        <div class="modal-body">
          <p>Na tomto webu používáme:</p>
          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" value="" id="cookie-necessary" checked disabled>
            <label class="form-check-label" for="cookie-necessary">
              Nezbytné cookies (vždy aktivní)
            </label>
            <div class="form-text">Zajišťují základní funkčnost webu a bezpečnost.</div>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" value="" id="cookie-analytics">
            <label class="form-check-label" for="cookie-analytics">Analytické cookies (Google Analytics přes GTM)</label>
            <div class="form-text">Pomáhají nám vylepšovat web – ukládáme až po souhlasu.</div>
          </div>
          <hr>
          <p class="small text-muted">Detailní informace: účely, doby uchování, příjemci… (lorem ipsum).</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Zrušit</button>
          <button class="btn btn-secondary" id="cookies-save">Uložit nastavení</button>
          <button class="btn btn-primary" id="cookies-accept-modal">Povolit vše</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS (bundle = Popper + JS) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>

  <!-- Mapy.cz loader (API) – pokus o načtení; při chybě přepneme na fallback -->
  <script src="https://api.mapy.cz/loader.js" defer></script>

  <!-- Aplikace: scrollTo, validace, cookies, PWA, Mapy.cz init, GTM -->
  <script>
  (function(){
    // Rok v patičce
    document.getElementById('year').textContent = new Date().getFullYear();

    // CTA smooth scroll – využijeme atribut data-scroll-to
    document.querySelectorAll('[data-scroll-to]').forEach(function(el){
      el.addEventListener('click', function(e){
        var target = document.querySelector(el.getAttribute('data-scroll-to'));
        if (target) { e.preventDefault(); target.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    });

    // Bootstrap: jednoduchá klientská validace formuláře
    // (viz dokumentace: přidáme .was-validated po submitu)
    document.querySelectorAll('.needs-validation').forEach(function(form){
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) { event.preventDefault(); event.stopPropagation(); }
        form.classList.add('was-validated');
      }, false);
    });

    // === Manifest přidán jako blob (aby vše bylo v jednom .html) ===
    try {
      var manifestScript = document.getElementById('manifest-json');
      if (manifestScript) {
        var link = document.createElement('link');
        link.rel = 'manifest';
        var blob = new Blob([manifestScript.textContent], { type: 'application/manifest+json' });
        link.href = URL.createObjectURL(blob);
        document.head.appendChild(link);
      }
    } catch(e) { console.warn('Manifest init error:', e); }

    // === Service worker registrace (pro plnohodnotný PWA režim přidejte /sw.js) ===
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').catch(function(err){
        console.info('SW není k dispozici v one-file demu (OK):', err?.message || err);
      });
    }

    // === Cookie consent & GTM ===
    var COOKIE_KEY = 'cookieConsentV1';
    var GTM_ID = 'GTM-XXXXXXX'; // TODO: nahraďte vlastním kontejnerem
    var banner = document.getElementById('cookie-banner');
    var btnAccept = document.getElementById('cookies-accept');
    var btnReject = document.getElementById('cookies-reject');
    var btnSettings = document.getElementById('cookies-settings');
    var btnSettingsFooter = document.getElementById('open-cookie-settings');
    var btnSave = document.getElementById('cookies-save');
    var btnAcceptModal = document.getElementById('cookies-accept-modal');
    var chkAnalytics = document.getElementById('cookie-analytics');
    var gtmNoscriptPlaceholder = document.getElementById('gtm-noscript-placeholder');

    function readConsent(){
      try { return JSON.parse(localStorage.getItem(COOKIE_KEY) || '{}'); }
      catch(_) { return {}; }
    }
    function writeConsent(consent){
      localStorage.setItem(COOKIE_KEY, JSON.stringify(consent));
      window.dispatchEvent(new CustomEvent('cookie-consent-changed', { detail: consent }));
    }
    function showBanner(){ banner.classList.remove('d-none'); }
    function hideBanner(){ banner.classList.add('d-none'); }

    function loadGTM(){
      if (window.__gtmLoaded || !GTM_ID || GTM_ID.indexOf('GTM-') !== 0) return;
      window.__gtmLoaded = true;
      // Vložíme GTM loader skript až po souhlasu s analytikou
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
        j.async=true; j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl; f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer',GTM_ID);

      // Noscript iframe placeholder – vložíme pro completeness
      gtmNoscriptPlaceholder.innerHTML =
        '<noscript><iframe src="https://www.googletagmanager.com/ns.html?id='+GTM_ID+'" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>';
      gtmNoscriptPlaceholder.classList.remove('d-none');
    }

    function applyConsent(consent){
      // Consent Mode – přepneme analytics_storage dle volby
      gtag('consent','update', {
        'analytics_storage': consent.analytics ? 'granted' : 'denied',
        'ad_storage': 'denied',
        'ad_user_data': 'denied',
        'ad_personalization': 'denied'
      });
      if (consent.analytics) loadGTM();
    }

    // Otevření modalu Cookies z patičky / lišty
    function openCookiesModal(){
      var modal = new bootstrap.Modal(document.getElementById('modal-cookies'));
      // předvyplnit stav
      var c = readConsent();
      chkAnalytics.checked = !!c.analytics;
      modal.show();
    }

    btnSettings && btnSettings.addEventListener('click', function(){ openCookiesModal(); });
    btnSettingsFooter && btnSettingsFooter.addEventListener('click', function(e){ e.preventDefault(); openCookiesModal(); });

    btnAccept && btnAccept.addEventListener('click', function(){
      var consent = { necessary: true, analytics: true, ts: Date.now() };
      writeConsent(consent); applyConsent(consent); hideBanner();
    });
    btnReject && btnReject.addEventListener('click', function(){
      var consent = { necessary: true, analytics: false, ts: Date.now() };
      writeConsent(consent); applyConsent(consent); hideBanner();
    });
    btnSave && btnSave.addEventListener('click', function(){
      var consent = { necessary: true, analytics: !!chkAnalytics.checked, ts: Date.now() };
      writeConsent(consent); applyConsent(consent);
      bootstrap.Modal.getInstance(document.getElementById('modal-cookies'))?.hide();
      hideBanner();
    });
    btnAcceptModal && btnAcceptModal.addEventListener('click', function(){
      var consent = { necessary: true, analytics: true, ts: Date.now() };
      writeConsent(consent); applyConsent(consent);
      bootstrap.Modal.getInstance(document.getElementById('modal-cookies'))?.hide();
      hideBanner();
    });

    // První zobrazení lišty / aplikace volby
    var initial = readConsent();
    if (typeof initial.analytics === 'undefined') {
      showBanner();
    } else {
      applyConsent(initial);
    }

    // === Mapy.cz inicializace s fallbackem na Google Maps ===
    // cíl: Kočičí 12, Praha (přibližné souřadnice centra Prahy)
    var CENTER_LNG = 14.42076, CENTER_LAT = 50.08804, ZOOM = 13;
    var mapReady = false;
    function showFallback(){
      if (!mapReady) {
        document.getElementById('gmap-holder').style.display = 'block';
      }
    }

    window.addEventListener('load', function(){
      // Timeout fallback (když by Mapy.cz API nebylo dostupné)
      var fallbackTimer = setTimeout(showFallback, 3500);

      try {
        // Loader z Mapy.cz je načten defer – počkáme na jeho dostupnost
        if (window.Loader) {
          window.Loader.load(null, {poi: true}, function(){
            try {
              if (!window.SMap) { showFallback(); return; }
              var mapDiv = document.getElementById('mapycz');
              var center = window.SMap.Coords.fromWGS84(CENTER_LNG, CENTER_LAT);
              var m = new window.SMap(mapDiv, center, ZOOM);
              m.addDefaultLayer(window.SMap.DEF_BASE).enable();
              m.addDefaultControls();

              var layer = new window.SMap.Layer.Marker();
              m.addLayer(layer).enable();
              var marker = new window.SMap.Marker(center, "our-place");
              layer.addMarker(marker);

              mapReady = true;
              clearTimeout(fallbackTimer);
            } catch (e) {
              console.warn('Mapy.cz init error:', e);
              showFallback();
            }
          });
        } else {
          showFallback();
        }
      } catch (e) {
        console.warn('Mapy loader error:', e);
        showFallback();
      }
    });
  })();
  </script>

  <!-- Strukturovaná data (LocalBusiness / PetService) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "PetService",
    "name": "Kočičí hotel Mňau",
    "image": "https://placecats.com/1200/630",
    "description": "Láskyplný kočičí hotel v srdci města. Bezpečné apartmány, denní reporty a mazlení podle přání.",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Kočičí 12",
      "addressLocality": "Praha 1",
      "postalCode": "11000",
      "addressCountry": "CZ"
    },
    "telephone": "+420777123456",
    "email": "ahoj@kocici-hotel.example",
    "openingHours": "Mo-Su 09:00-18:00",
    "url": "https://kocici-hotel.example/"
  }
  </script>

  <!-- Noscript info -->
  <noscript>
    <div class="container my-3 alert alert-warning">
      Pro plnou funkčnost povolte prosím JavaScript. Některé části (mapa, cookie nastavení) nebudou bez JS dostupné.
    </div>
  </noscript>
</body>
</html>
